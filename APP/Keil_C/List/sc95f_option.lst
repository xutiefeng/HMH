C51 COMPILER V9.59.0.0   SC95F_OPTION                                                      03/27/2024 21:25:09 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE SC95F_OPTION
OBJECT MODULE PLACED IN ..\Output\sc95f_option.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\FWLib\SC95F_Lib\src\sc95f_option.c LARGE OMF2 OPTIMIZE(0,SIZE) BROWSE
                    - INTVECTOR(0X1000) INCDIR(..\FWLib\SC95F_Lib\inc;..\User;..\IOT_DRIVER\XIAOMI;..\Drivers;..\Drivers\TKDriver\C;..\List\.
                    -.\Apps;..\Apps) DEFINE(SC95F8x1xB) DEBUG PRINT(..\List\sc95f_option.lst) TABS(2) OBJECT(..\Output\sc95f_option.obj)

line level    source

   1          //************************************************************
   2          //  Copyright (c) 深圳市赛元微电子股份有限公司
   3          //  文件名称:     sc95f_option.c
   4          //  作者    :
   5          //  模块功能:     Customer Option寄存器配置C文件
   6          //  最后更正日期: 2024年1月18日
   7          //  版本:       V1.0002
   8          //  说明:该文件仅适用于SC95F系列芯片
   9          //*************************************************************
  10          
  11          #include "sc95f_option.h"
  12          
  13          /*****************************************************
  14          *函数名称:void OPTION_WDT_Cmd(FunctionalState NewState)
  15          *函数功能:WDT功能开关函数
  16          *入口参数:
  17          FunctionalState:NewState:看门狗功能启动/关闭选择
  18          *出口参数:void
  19          *****************************************************/
  20          void OPTION_WDT_Cmd(FunctionalState NewState)
  21          {
  22   1        OPINX = 0XC1;
  23   1      
  24   1        if (NewState == DISABLE)
  25   1        {
  26   2          OPREG &= 0X7F;
  27   2        }
  28   1        else
  29   1        {
  30   2          OPREG |= 0X80;
  31   2        }
  32   1      }
  33          
  34          /*****************************************************
  35          *函数名称:void OPTION_XTIPLL_Cmd(FunctionalState NewState)
  36          *函数功能:外部低频晶振使能
  37          *入口参数:
  38          FunctionalState:NewState:外部低频晶振启动/关闭选择
  39          *出口参数:void
  40          *****************************************************/
  41          void OPTION_XTIPLL_Cmd(FunctionalState NewState)
  42          {
  43   1        OPINX = 0XC1;
  44   1      
  45   1        if (NewState == DISABLE)
  46   1        {
  47   2          OPREG &= 0XBF;
  48   2        }
  49   1        else
  50   1        {
  51   2          OPREG |= 0X40;
  52   2        }
  53   1      }
C51 COMPILER V9.59.0.0   SC95F_OPTION                                                      03/27/2024 21:25:09 PAGE 2   

  54          
  55          /*****************************************************
  56          *函数名称:void OPTION_SYSCLK_Init(SYSCLK_PresSel_TypeDef SYSCLK_PresSel)
  57          *函数功能:系统时钟分频初始化
  58          *入口参数:
  59          SYSCLK_PresSel_TypeDef:SYSCLK_PresSel:选择系统时钟分频
  60          *出口参数:void
  61          *****************************************************/
  62          void OPTION_SYSCLK_Init(SYSCLK_PresSel_TypeDef SYSCLK_PresSel)
  63          {
  64   1        OPINX = 0XC1;
  65   1        OPREG = OPREG & 0XCF | SYSCLK_PresSel;
  66   1      }
  67          
  68          #if defined(SC95F8x1x) || defined(SC95F7x1x) || defined(SC95FWxx) || defined(SC95F8x2x) || defined(SC95F7x
             -2x) || defined(SC95FS52x) || defined(SC95F8x7x) || defined(SC95F7x7x)\
  69             || defined(SC95R503)
              /*****************************************************
              *函数名称:void OPTION_RST_PIN_Cmd(FunctionalState NewState)
              *函数功能:外部复位管脚使能
              *入口参数:
              FunctionalState:NewState:外部复位引脚功能使能/关闭选择
              *出口参数:void
              *****************************************************/
              void OPTION_RST_PIN_Cmd(FunctionalState NewState)
              {
                OPINX = 0XC1;
              
                if (NewState == DISABLE)
                {
                  OPREG |= 0X08;
                }
                else
                {
                  OPREG &= 0XF7;
                }
              }
              #endif
  91          
  92          /*****************************************************
  93          *函数名称:void OPTION_LVR_Init(LVR_Config_TypeDef LVR_Config)
  94          *函数功能:LVR 电压选择
  95          *入口参数:
  96          LVR_Config_TypeDef:LVR_Config:选择LVR电压
  97          *出口参数:void
  98          *****************************************************/
  99          void OPTION_LVR_Init(LVR_Config_TypeDef LVR_Config)
 100          {
 101   1        OPINX = 0XC1;
 102   1        OPREG = OPREG & 0XF8 | LVR_Config;
 103   1      }
 104          
 105          /*****************************************************
 106          *函数名称:void OPTION_ADC_VrefConfig(ADC_Vref_TypeDef ADC_Vref)
 107          *函数功能:ADC 参考电压选择
 108          *入口参数:
 109          ADC_Vref_TypeDef:ADC_Vref:选择ADC参考电压
 110          *出口参数:void
 111          *****************************************************/
 112          void OPTION_ADC_VrefConfig(ADC_Vref_TypeDef ADC_Vref)
 113          {
 114   1        OPINX = 0xC2;
C51 COMPILER V9.59.0.0   SC95F_OPTION                                                      03/27/2024 21:25:09 PAGE 3   

 115   1      
 116   1        if (ADC_Vref == ADC_VREF_2_048V)
 117   1        {
 118   2          OPREG &= 0x3f;
 119   2          OPREG |= 0x40; //选择参考内部电压2.048V。
 120   2        }
 121   1      
 122   1        if (ADC_Vref == ADC_VREF_1_024V)
 123   1        {
 124   2          OPREG &= 0x3f;
 125   2          OPREG |= 0x80; //选择参考内部电压1.024V。
 126   2        }
 127   1      
 128   1        if (ADC_Vref == ADC_VREF_VDD)
 129   1        {
 130   2          OPREG &= 0x3f; //选择参考电压VDD。
 131   2        }
 132   1      }
 133          
 134          /**************************************************
 135          *函数名称:void OPTION_IAP_SetOperateRange(IAP_OperateRange_TypeDef IAP_OperateRange)
 136          *函数功能:允许IAP操作的范围设置
 137          *入口参数:
 138          IAP_OperateRange_TypeDef:IAP_OperateRange:IAP操作范围
 139          *出口参数:void
 140          **************************************************/
 141          void OPTION_IAP_SetOperateRange(IAP_OperateRange_TypeDef IAP_OperateRange)
 142          {
 143   1        OPINX = 0xC2;
 144   1        OPREG = (OPREG & 0xF3) | IAP_OperateRange;
 145   1      }
 146          
 147          /**************************************************
 148          *函数名称:void OPTION_JTG_Cmd(FunctionalState NewState)
 149          *函数功能:JTAG/IO口切换控制
 150          *入口参数:
 151          FunctionalState:NewState:烧录口作为正常的IO使用（DISBLE）,烧录口作为tCK/tDIO使用（ENABLE）
 152          *出口参数:void
 153          **************************************************/
 154          void OPTION_JTG_Cmd(FunctionalState NewState)
 155          {
 156   1        OPINX = 0xC2;
 157   1        if (NewState == DISABLE)
 158   1        {
 159   2          OPREG |= 0X10;
 160   2        }
 161   1        else
 162   1        {
 163   2          OPREG &= 0XEF;
 164   2        }
 165   1      }
 166          
 167          /******************* (C) COPYRIGHT 2020 SinOne Microelectronics *****END OF FILE****/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    211    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      7    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.59.0.0   SC95F_OPTION                                                      03/27/2024 21:25:09 PAGE 4   

   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
